<!doctype html><html lang=en-au dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Cross-platform, \" pipable\" ai directly in your terminal. bring the power of llms to your local environment. ‚ö°Ô∏è"><title>AI for the Shell</title>
<link rel=canonical href=https://calebtrevatt.com/p/ai-for-the-shell/><link rel=stylesheet href=/scss/style.min.f49760b2e7ad1c89ccce9cb27cb7c08d8b460aadd4fce422a86db3d4b24dde59.css><meta property='og:title' content="AI for the Shell"><meta property='og:description' content="Cross-platform, \" pipable\" ai directly in your terminal. bring the power of llms to your local environment. ‚ö°Ô∏è"><meta property='og:url' content='https://calebtrevatt.com/p/ai-for-the-shell/'><meta property='og:site_name' content='Caleb Trevatt'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='AI'><meta property='article:tag' content='Tool'><meta property='article:tag' content='OpenAI'><meta property='article:tag' content='Groq'><meta property='article:published_time' content='2024-05-30T00:00:00+00:00'><meta property='article:modified_time' content='2024-05-30T00:00:00+00:00'><meta property='og:image' content='https://calebtrevatt.com/p/ai-for-the-shell/cover.jpg'><meta name=twitter:title content="AI for the Shell"><meta name=twitter:description content="Cross-platform, \" pipable\" ai directly in your terminal. bring the power of llms to your local environment. ‚ö°Ô∏è"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://calebtrevatt.com/p/ai-for-the-shell/cover.jpg'><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/ai_avatar1_hu0587dec7c4c810eace89d77dda924d0a_647498_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>‚ú®</span></figure><div class=site-meta><h1 class=site-name><a href=/>Caleb Trevatt</a></h1><h2 class=site-description>Creative Investigator | Tech Tinkerer | Thing Thinkerer</h2></div></header><ol class=menu-social><li><a href=https://github.com/in03 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=/post/index.xml target=_blank title="RSS Feed" rel=me><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-rss"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 19m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li><li><a href=https://x.com/CalebTrevatt target=_blank title=X rel=me><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16H20L8.267 4z"/><path d="M4 20l6.768-6.768m2.46-2.46L20 4"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-notebook"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h11a2 2 0 012 2v12a2 2 0 01-2 2H6a1 1 0 01-1-1V5a1 1 0 011-1m3 0v18"/><path d="M13 8h2"/><path d="M13 12h2"/></svg>
<span>Blog</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-user-code"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 108 0A4 4 0 008 7"/><path d="M6 21v-2a4 4 0 014-4h3.5"/><path d="M20 21l2-2-2-2"/><path d="M17 17l-2 2 2 2"/></svg>
<span>About</span></a></li><li><a href=/projects/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-rocket"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 13a8 8 0 017 7 6 6 0 003-5 9 9 0 006-8 3 3 0 00-3-3 9 9 0 00-8 6 6 6 0 00-5 3"/><path d="M7 14a6 6 0 00-3 6 6 6 0 006-3"/><path d="M15 9m-1 0a1 1 0 102 0 1 1 0 10-2 0"/></svg>
<span>Projects</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#what-is-it>What is it?</a></li><li><a href=#examples>Examples</a><ol><li><a href=#rich-markdown-output>Rich Markdown Output</a></li><li><a href=#evaluate-script-security>Evaluate Script Security</a></li><li><a href=#piping-github-api-data>Piping GitHub API Data</a></li><li><a href=#piping-to-text-to-speech>Piping to Text-to-Speech</a></li><li><a href=#calling-in-a-loop>Calling in a Loop</a></li></ol></li><li><a href=#multi-llm-support>Multi LLM Support</a></li><li><a href=#conversational-memory>Conversational Memory</a><ol><li><a href=#a-really-heavy-example>A Really Heavy Example</a><ol><li><a href=#interfacing-with-the-commandlet>Interfacing with the Commandlet</a></li><li><a href=#pushing-jobs>Pushing Jobs</a></li><li><a href=#retrospect>Retrospect</a></li></ol></li></ol></li><li><a href=#wrapping-up>Wrapping Up</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/ai-for-the-shell/><img src=/p/ai-for-the-shell/cover_hu42b1e5fa58b9a97d592da02d34f3ec8e_64364_800x0_resize_q75_box.jpg srcset="/p/ai-for-the-shell/cover_hu42b1e5fa58b9a97d592da02d34f3ec8e_64364_800x0_resize_q75_box.jpg 800w, /p/ai-for-the-shell/cover_hu42b1e5fa58b9a97d592da02d34f3ec8e_64364_1600x0_resize_q75_box.jpg 1600w" width=800 height=600 loading=lazy alt="Featured image of post AI for the Shell"></a></div><div class=article-details><header class=article-category><a href=/categories/showcase/>Showcase</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/ai-for-the-shell/>AI for the Shell</a></h2><h3 class=article-subtitle>Cross-platform, "pipable" AI directly in your terminal. Bring the power of LLMs to your local environment. ‚ö°Ô∏è</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 30, 2024</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>8 minute read</time></div></footer></div></header><section class=article-content><h2 id=what-is-it>What is it?</h2><p>AI integration is becoming ubiquitous. Warp is pioneering &ldquo;the terminal of the future&rdquo; with AI capabilities built-in. VS Code supports extensions like Github Copilot and Cody, while Zed includes Zed AI. But what if you need a simple, versatile tool to bring AI into any conversation? Checkout <strong>Mods</strong>. Charm&rsquo;s dev team and community are on a roll, producing some awesome new apps and libraries, and this is no exception. üëÄ</p><p><img src=/p/ai-for-the-shell/mods_img.png width=1260 height=716 srcset="/p/ai-for-the-shell/mods_img_hu3d94184d52d3e360ec98111d68500759_541470_480x0_resize_box_3.png 480w, /p/ai-for-the-shell/mods_img_hu3d94184d52d3e360ec98111d68500759_541470_1024x0_resize_box_3.png 1024w" loading=lazy alt="Credit: Charmbracelet" class=gallery-image data-flex-grow=175 data-flex-basis=422px></p><p>Mods takes the concept of prompting a GPT and brings it to the command line. It even supports piping stdin and stdout!
Any output from any command on your terminal, think <code>ls</code>, <code>cat</code>, <code>curl</code> and the like, can become input for Mods. Prompt it with some instructions on how to handle that data and you can either get rich feedback in your terminal or pipe the output for further processing.</p><p>Curious? Here are some examples!</p><hr><h2 id=examples>Examples</h2><h3 id=rich-markdown-output>Rich Markdown Output</h3><p>Mods supports rich colour and formatting out-of-the-box. Install Charm&rsquo;s Glow, set the default output format to markdown and every response will be pretty. ‚ú®</p><p><img src=/p/ai-for-the-shell/pokemon.gif width=1920 height=1080 srcset="/p/ai-for-the-shell/pokemon_hu9f3e5f96d0f822bdd27368f33e4b64cc_268588_480x0_resize_box_1.gif 480w, /p/ai-for-the-shell/pokemon_hu9f3e5f96d0f822bdd27368f33e4b64cc_268588_1024x0_resize_box_1.gif 1024w" loading=lazy alt="Disclaimer: I don&rsquo;t know anything about Pokemon üò¨" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><h3 id=evaluate-script-security>Evaluate Script Security</h3><p>How about those inherently-unsafe one-liner shell script installers? Now finally safe with Mods! Here&rsquo;s an example in WSL Ubuntu:
<img src=/p/ai-for-the-shell/oneliner.gif width=1920 height=1400 srcset="/p/ai-for-the-shell/oneliner_hu30f9f8d6384e66eca6a38c5174c9ca98_1917669_480x0_resize_box_1.gif 480w, /p/ai-for-the-shell/oneliner_hu30f9f8d6384e66eca6a38c5174c9ca98_1917669_1024x0_resize_box_1.gif 1024w" loading=lazy alt="Easily get a second opinion on shell script safety." class=gallery-image data-flex-grow=137 data-flex-basis=329px></p><h3 id=piping-github-api-data>Piping GitHub API Data</h3><p>Feed it raw JSON data from an API. Here it is running in good old Powershell 5 on Windows 10:
<img src=/p/ai-for-the-shell/rate-repo.gif width=1920 height=1280 srcset="/p/ai-for-the-shell/rate-repo_huf2deda305481b1957f23897f3aedc230_432397_480x0_resize_box_1.gif 480w, /p/ai-for-the-shell/rate-repo_huf2deda305481b1957f23897f3aedc230_432397_1024x0_resize_box_1.gif 1024w" loading=lazy alt="Shameless plug for my cheeky repo." class=gallery-image data-flex-grow=150 data-flex-basis=360px></p><h3 id=piping-to-text-to-speech>Piping to Text-to-Speech</h3><p>What about some text to speech? We can pipe stdout to a text to speech engine. Here&rsquo;s a little example with Wsay, a Windows equivalent to &ldquo;Say&rdquo; on MacOS: <a class=link href=https://github.com/p-groarke/wsay target=_blank rel=noopener>https://github.com/p-groarke/wsay</a>
<img src=/p/ai-for-the-shell/tts.gif width=1920 height=1080 srcset="/p/ai-for-the-shell/tts_hu5551ef363dbabb730d3ad9413863b1fd_80773_480x0_resize_box_1.gif 480w, /p/ai-for-the-shell/tts_hu5551ef363dbabb730d3ad9413863b1fd_80773_1024x0_resize_box_1.gif 1024w" loading=lazy alt="Duck haikus for life" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><blockquote><p>üìù <strong>Note&mldr;</strong></p><p>It might be worth considering something a little more natural if you want it to read you bedtime stories. <a class=link href=https://github.com/pndurette/gTTS target=_blank rel=noopener>Google text-to-speech</a> might be a better option.</p></blockquote><audio controls preload=auto><source src=tts_limerick.wav></audio><h3 id=calling-in-a-loop>Calling in a Loop</h3><p>You can even call it in a loop! This will ask for 10 fresh duck haikus. Each iteration is a new conversation. No conversational context; guaranteed freshness. üçÉ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=c># 10 ü¶Ü haikus straight to your speakers!</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mf>1</span><span class=p>.</span><span class=mf>.10</span> <span class=p>|</span> <span class=p>%</span> <span class=p>{</span> <span class=s2>&#34;Tell me a haiku about ducks&#34;</span> <span class=p>|</span> <span class=n>mods</span> <span class=p>|</span> <span class=n>wsay</span> <span class=n>-o</span> <span class=n>duck_haiku</span><span class=nv>$_</span><span class=p>.</span><span class=py>wav</span> <span class=p>}</span> 
</span></span></code></pre></td></tr></table></div></div><p>And in Bash, like so:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>    <span class=k>for</span> i in <span class=o>{</span>1..10<span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Haiku time!&#34;</span> <span class=p>|</span> mods <span class=p>|</span> gtts-cli - --output duck_haiku<span class=nv>$i</span>.mp3
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div><p>For more examples check out the official ones from <a class=link href=https://github.com/charmbracelet/mods/blob/main/examples.md target=_blank rel=noopener>the Mods repo</a></p><h2 id=multi-llm-support>Multi LLM Support</h2><p>Mods supports multiple Large Language Models (LLMs) through multiple providers. Providing an OpenAI API key gets you a pretty quick out-of-box experience. It&rsquo;s already set up to use OpenAI&rsquo;s GPT-4 by default.</p><p>Pop open the settings with:</p><p><code>mods --settings</code></p><p>Note, you&rsquo;ll have to define a default <code>$EDITOR</code> in your environment variables.</p><p>You&rsquo;ll be greeted with the <em>mods.yml</em> file. Check out the APIs section. Mods supports:</p><ul><li><p><strong>OpenAI</strong>: GPT-4O, GPT-4, GPT-3.5-Turbo, etc.</p></li><li><p><strong>Azure</strong>: GPT-4O, GPT-4, GPT-3.5-Turbo, etc.</p></li><li><p><strong>Perplexity AI</strong>: CodeLlama, Mistral, Claude 3, Sonar, etc.</p></li><li><p><strong>Groq</strong>: Mixtral, Llama 2, Llama 3, etc.</p></li><li><p><strong>RunPod</strong>: OpenChat, Ollama, etc (IaaS/SaaS)</p></li><li><p><strong>Local</strong>: Llama.cpp, GPT4ALL.cpp, etc. (local - GPU optional!)</p></li></ul><blockquote><p>üìù <strong>Note&mldr;</strong></p><p>Until today, I&rsquo;d never tried Groq. Boy is it fast! Evidently, Groq provides <a class=link href=https://www.semianalysis.com/p/groq-inference-tokenomics-speed-but target=_blank rel=noopener>significantly faster inference</a> through next-gen hardware: Language Processing Units (LPUs).</p><p>API access is free, at least for now. I couldn&rsquo;t find any official pricing anywhere. My guess is they&rsquo;re relying on the free access to spread the word so they sell their chips üçüüí≤</p></blockquote><p>Check it out: <a class=link href="https://groq.com/?ref=ghost.notablegravity.com" target=_blank rel=noopener>https://groq.com</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Default model (gpt-3.5-turbo, gpt-4, ggml-gpt4all-j...).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>default-model</span><span class=p>:</span><span class=w> </span><span class=l>gpt-4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>openai</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>base-url</span><span class=p>:</span><span class=w> </span><span class=l>https://api.openai.com/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>api-key</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>api-key-env</span><span class=p>:</span><span class=w> </span><span class=l>OPENAI_API_KEY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>models</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>gpt-4</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>aliases</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;4&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>max-input-chars</span><span class=p>:</span><span class=w> </span><span class=m>24500</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>fallback</span><span class=p>:</span><span class=w> </span><span class=l>gpt-3.5-turbo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>gpt-4-1106-preview</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>aliases</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;128k&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>max-input-chars</span><span class=p>:</span><span class=w> </span><span class=m>392000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>fallback</span><span class=p>:</span><span class=w> </span><span class=l>gpt-4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Configuration is the same for all providers. Provide the base url, desired models, and specify aliases for those models. If you want to use a specific model, call it like this:</p><p><code>"What is gravity?" | mods --model="Mixtral"</code></p><p>You can also supply <code>-M</code> or <code>--Ask-Model</code> to interactively choose a model (though this seems to be ignored if you pass a prompt non-interactively).</p><h2 id=conversational-memory>Conversational Memory</h2><p>Nice! Now when I was generating haikus I hard-sold amneisa as a feature for conversational freshness. What if we wanted to remember conversations across commands? Maybe with something more complicated&mldr; Something that can&rsquo;t be done &ldquo;zero-shot&rdquo;?</p><p>Well thankfully Mods has some handy parameters that allow resuming and managing conversations:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>  </span>-<span class=l>c, --continue       Continue from the last response or a given save title.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>-<span class=l>C, --continue-last  Continue from the last response.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>-<span class=l>l, --list           Lists saved conversations.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>-<span class=l>t, --title          Saves the current conversation with the given title.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>-<span class=l>d, --delete         Deletes a saved conversation with the given title or ID.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>-<span class=l>s, --show           Show a saved conversation with the given title or ID.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>-<span class=l>S, --show-last      Show the last saved conversation.</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=a-really-heavy-example>A Really Heavy Example</h3><p>Here&rsquo;s a PowerShell commandlet I made (along with 59 other functions necessary to make it work). I use it to provision temporary user accounts for student exams at my workplace.</p><p><code>New-Exam -D 10/03 -FT 8 -TT 11 -Alloc 105 -U 5 -CC "10SCI"</code></p><p>My bespoke exam provisioning commandlet</p><p>For the sake of your screen real-estate I&rsquo;ve used the parameter aliases, but I will explain in a moment!</p><p>Essentially this commandlet:</p><ul><li><p>Sets Active Directory account logon hours</p></li><li><p>Sets account expiration time</p></li><li><p>Sets group membership (for exam conditions)</p></li><li><p>Validates users by name or student ID and fetches AD attributes</p></li><li><p>Populates an HTML login sheet template with user data and exam details</p></li><li><p>Merges the sheets into a PDF</p></li></ul><p>And it saves me <strong>HOURS.</strong></p><p>But one thing remains that sucks like a parasite at my remaining time and brain power:</p><p><strong>The exam login requests themselves.</strong></p><p>The problem is that login reqeuests aren&rsquo;t consistent. Requests come in all shapes and sizes. Some come with multiple updates across a chain of emails. Some come in concise bullet points. Some say &ldquo;next Wednesday&rdquo;. Others say &ldquo;19/05/2024&rdquo;.</p><p>What an excellent opportunity for AI ‚Äì and for Mods!</p><h4 id=interfacing-with-the-commandlet>Interfacing with the Commandlet</h4><p>So first I told Mods how to commandlet. works and the inputs and outputs I expect:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$Instructions</span> <span class=p>=</span> <span class=s2>&#34;New-Exam is a powershell commandlet.
</span></span></span><span class=line><span class=cl><span class=s2>&gt; It is used to create temporary Active Directory accounts for exams.
</span></span></span><span class=line><span class=cl><span class=s2>&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; Here&#39;s an example:
</span></span></span><span class=line><span class=cl><span class=s2>&gt; New-Exam -D 10/03 -FT 8 -TT 11 -U 5 -S &#34;</span><span class=n>10SCI</span><span class=s2>&#34; -C
</span></span></span><span class=line><span class=cl><span class=s2>&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; -D is &#34;</span><span class=n>date</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; -FT is &#34;</span><span class=n>from</span> <span class=n>time</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; -TT is &#34;</span><span class=n>to</span> <span class=n>time</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; -U is &#34;</span><span class=n>user</span> <span class=n>count</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; -S is &#34;</span><span class=n>subject</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; -C is &#34;</span><span class=n>conditions</span><span class=s2>&#34; (do not include)
</span></span></span><span class=line><span class=cl><span class=s2>&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; Follow the format of the example.
</span></span></span><span class=line><span class=cl><span class=s2>&gt; Output the exact command to run, no extra information or context.
</span></span></span><span class=line><span class=cl><span class=s2>&gt; If data is missing or invalid, output:
</span></span></span><span class=line><span class=cl><span class=s2>&gt; &#39;echo &#34;</span><span class=n>Invalid</span> <span class=n>data</span><span class=err>:</span> <span class=n>___</span><span class=s2>&#34; 
</span></span></span><span class=line><span class=cl><span class=s2>&gt; where blank is the invalid or missing data.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2></span><span class=nv>$Instructions</span><span class=s2> | mods --title=&#34;</span><span class=n>New</span> <span class=n>Exam</span><span class=s2>&#34;
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>üìù <strong>Note&mldr;</strong></p><p>&ldquo;Conditions&rdquo; above I asked it not to include. The conditions aren&rsquo;t difficult to pass, but for the sake of experimentation I left them out. Fortunately, if a mandatory parameter is left out of a PowerShell commandlet it will be prompted at runtime. Good to know!</p></blockquote><h4 id=pushing-jobs>Pushing Jobs</h4><p>Then I gave it an exam login request email.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nv>$Message</span> <span class=p>=</span> <span class=s2>&#34;Hi IT team!
</span></span></span><span class=line><span class=cl><span class=s2>&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; We have a science exam on tomorrow.
</span></span></span><span class=line><span class=cl><span class=s2>&gt; 
</span></span></span><span class=line><span class=cl><span class=s2>&gt; Please can we have four logins?
</span></span></span><span class=line><span class=cl><span class=s2>&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; - Disable internet
</span></span></span><span class=line><span class=cl><span class=s2>&gt; - No USB access
</span></span></span><span class=line><span class=cl><span class=s2>&gt; - They can have spellcheck
</span></span></span><span class=line><span class=cl><span class=s2>&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; Start: 10:30, Finish: 12PM
</span></span></span><span class=line><span class=cl><span class=s2>&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; Kind regards,
</span></span></span><span class=line><span class=cl><span class=s2>&gt;
</span></span></span><span class=line><span class=cl><span class=s2>&gt; Dane Joe&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>$</span> <span class=n>Message</span> <span class=p>|</span> <span class=n>mods</span> <span class=p>-</span><span class=n>-continue</span><span class=p>=</span><span class=s2>&#34;New Exam&#34;</span> <span class=p>|</span> <span class=nb>Invoke-Expression</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=retrospect>Retrospect</h4><p>Running the commandlet is now as easy as &ldquo;continuing&rdquo; the conversation with the previous context (the instructions) and piping it to PowerShell&rsquo;s Invoke-Expression. Super easy!</p><p>I actually have a lot of validation built into the commandlet. Like what if the exam is on a Saturday? Shouldn&rsquo;t happen. What if the subject is only offered in grade 12 and a grade 10 student is taking it? Shouldn&rsquo;t happen.</p><p>I&rsquo;m a little wonky about trusting validation to the mysterious <em>Latent Space</em>. Getting different answers to the same question asked twice makes me a little twitchy&mldr; But technically all of those validation rules could be applied at the prompt context level instead.</p><p>Could this all be solved with a simple HTML form? Definitely! Yes.</p><p>Should it? Mmhmm. Probably!</p><p>As a general rule, if you want automation to produce consistently reliable outputs, you need consistently reliable inputs. AI &ldquo;magics&rdquo; away some of this, but it still requires some massaging and testing.</p><p>In a situation like this, if a user form was not an option, it would be a great candidate for an AI flow in LangChain or Flowise. I&rsquo;m hoping to take a look at these soon!</p><h2 id=wrapping-up>Wrapping Up</h2><p>Mods is a great bridge between AI LLMs great demo of some cheap ad-hoc glue to try things out. Great for protyping, proof-of-concept, or ad-hoc formatting/parsing/sorting and the like. Perfect for someone like me who frequently gets caught up on the implementation details. With mods I can rapidly prototype in English, adjusting for desired behaviour with additional prompts. Once I&rsquo;ve got a proof of concept, I can lay down something more solid.</p><p>If an HTTP form This is actually a great use case for LangChain or Flowise. Hoping to take a look at these soon!</p><p>So &ldquo;Don&rsquo;t be shy, give Mods a try.&rdquo;</p></section><footer class=article-footer><section class=article-tags><a href=/tags/ai/>AI</a>
<a href=/tags/tool/>Tool</a>
<a href=/tags/openai/>OpenAI</a>
<a href=/tags/groq/>Groq</a></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on May 30, 2024 00:00 UTC</span></section></footer></article><script src=https://giscus.app/client.js data-repo=in03/calebs-corner data-repo-id=R_kgDOMCLuwQ data-category=Announcements data-category-id=DIC_kwDOMCLuwc4CfwD2 data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=noborder_light data-lang=en crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"noborder_light":"noborder_dark")}})()</script><footer class=site-footer><section class=copyright>&copy;
2024 Caleb Trevatt</section><section class=powerby>Made with ‚ù§Ô∏è in AUS<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.26.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>